{"version":3,"sources":["webpack:///$_lazy_route_resource lazy namespace object","webpack:///node_modules/@ionic/core/dist/esm lazy ^\\.\\/.*\\.entry\\.js$ include: \\.entry\\.js$ exclude: \\.system\\.entry\\.js$ namespace object","webpack:///node_modules/@ionic/pwa-elements/dist/esm lazy ^\\.\\/.*\\.entry\\.js$ include: \\.entry\\.js$ exclude: \\.system\\.entry\\.js$ namespace object","webpack:///src/app/app.component.html","webpack:///src/app/app-routing.module.ts","webpack:///src/app/app.component.scss","webpack:///src/app/app.component.ts","webpack:///src/app/app.module.ts","webpack:///src/app/services/collector/collector.service.ts","webpack:///src/app/services/collector/information/capacitor-provider/capacitor-provider.ts","webpack:///src/app/services/collector/information/information-provider.ts","webpack:///src/app/services/collector/signature/default-provider/default-provider.ts","webpack:///src/app/services/collector/signature/signature-provider.ts","webpack:///src/app/services/data/caption/caption-repository.service.ts","webpack:///src/app/services/data/information/information-repository.service.ts","webpack:///src/app/services/data/proof/proof-repository.service.ts","webpack:///src/app/services/data/signature/signature-repository.service.ts","webpack:///src/app/services/language/language.service.ts","webpack:///src/app/services/notification/notification.service.ts","webpack:///src/app/services/publisher/publisher.ts","webpack:///src/app/services/publisher/publishers-alert/publishers-alert.service.ts","webpack:///src/app/services/publisher/sample-publisher/sample-publisher.ts","webpack:///src/app/services/serialization/serialization.service.ts","webpack:///src/app/transloco-root.module.ts","webpack:///src/app/utils/background-task/background-task.ts","webpack:///src/app/utils/crypto/crypto.ts","webpack:///src/app/utils/encoding/encoding.ts","webpack:///src/app/utils/file/file.ts","webpack:///src/app/utils/preferences/preference-manager.ts","webpack:///src/app/utils/preferences/preferences.ts","webpack:///src/app/utils/storage/storage.ts","webpack:///src/environments/environment.ts","webpack:///src/main.ts"],"names":["webpackEmptyAsyncContext","req","Promise","resolve","then","e","Error","code","keys","module","exports","id","map","webpackAsyncContext","__webpack_require__","o","ids","all","slice","webpackAsyncContextKeys","Object","routes","path","redirectTo","pathMatch","loadChildren","m","StoragePageModule","SettingsPageModule","ProofPageModule","AppRoutingModule","imports","forRoot","preloadingStrategy","SplashScreen","AppComponent","platform","collectorService","publishersAlert","serializationService","informationRepository","signatureRepository","translocoService","notificationService","langaugeService","initializeApp","initializeCollector","initializePublisher","initialize$","pipe","subscribe","ready","hide","addInformationProvider","addSignatureProvider","addPublisher","checkProperties","selector","template","AppModule","declarations","entryComponents","providers","provide","useClass","bootstrap","CollectorService","proofRepository","informationProviders","Set","signatureProviders","rawBase64","mimeType","store$","proof","collectAndSign$","saveRawFile$","uri","hash","add$","timestamp","Date","now","proofs","notificationId","createNotificationId","notify","translate","provider","collectAndStore$","_","cancel","forEach","add","providedIn","Device","Geolocation","CapacitorProvider","name","getInfo","getBatteryInfo","getLanguageCode","getCurrentPosition","enableHighAccuracy","maximumAge","timeout","deviceInfo","batteryInfo","languageCode","geolocationPosition","proofHash","value","String","model","uuid","appVersion","appBuild","operatingSystem","osVersion","manufacturer","isVirtual","memUsed","diskFree","diskTotal","batteryLevel","isCharging","coords","latitude","longitude","InformationProvider","provide$","information","preferences","DEFAULT_SIGNATURE_PROVIDER_PREF","DefaultSignatureProvider","serialized","getString$","privateKeyHex","signatureHex","getPublicKey$","publicKeyHex","signature","publicKey","getPrivateKey$","privateKey","length","setString$","SignatureProvider","stringify$","signatures","CaptionRepository","captionStorage","refresh$","getAll$","captions","filter","caption","find","found","remove$","getByProof$","InformationRepository","informationStorage","informationList","info","Filesystem","ProofRepository","captionRepository","proofStorage","rawFileDir","Data","rawFileFolderName","proofList","deleteRawFile$","removeByProof$","readFile","extension","directory","result","data","writeFile","recursive","deleteFile","SignatureRepository","signatureStorage","LanguageService","LANGUAGE_PREF","prefKeys","langauge","languages","defaultLanguage","currentLanguageKey$","get$","setDefaultLang","key","setCurrentLanguage$","set$","setActiveLang","LocalNotifications","NotificationService","currentId","requestPermission","console","log","granted","title","body","schedule","notifications","Publisher","publisherName","run$","PublishersAlert","alertController","publishers","publisher","push","create","header","inputs","index","type","label","checked","buttons","text","role","handler","getPublisherByName","publish","alertElement","present","SamplePublisher","SerializationService","createSortedProofInformation$","sortedProofInformation","JSON","stringify","sortedInformation","sort","a","b","proofHashCompared","localeCompare","providerCompared","nameCompared","valueCompared","entries","TranslocoHttpLoader","http","lang","get","TranslocoRootModule","useValue","availableLangs","defaultLang","fallbackLang","missingHandler","useFallbackTranslation","reRenderOnLangChange","prodMode","production","BackgroundTask","subscribeInBackground","work$","isPluginAvailable","taskId","beforeExit","finish","subtle","crypto","SHA_256","ECDSA","SECP256R1","sha256$","object","json","sha256WithString$","str","TextEncoder","encode","buffer","arrayBuffer","digest","digested","sha256WithBase64$","base64","createEcKeyPair$","generateKey","namedCurve","exportEcdsaPublicKey$","exportEcdsaPrivateKey$","signWithSha256AndEcdsa$","message","importEcdsaPrivateKey$","sign","verifyWithSha256AndEcdsa$","importEcdsaPublicKey$","verify","exportKey","keyHex","importKey","textEncoder","textDecoder","TextDecoder","base64ToArrayBuffer","binaryString","atob","bytes","Uint8Array","i","charCodeAt","arrayBufferToBase64","btoa","fromCharCode","arrayBufferToHex","toString","padStart","join","hexToArrayBuffer","hex","match","h","parseInt","stringToArrayBuffer","arrayBufferToString","decode","fileNameWithoutExtension","PreferenceManager","Storage","Preferences","defaultValue","converter","parse","ret","Number","v","set","tuples$","makeNameDir$","readNameDir$","files","fileNames","fileName","readFile$","results","tuples","next","mkdir","err","readdir","encoding","UTF8","asObservable","tuple","saveFile$","deleteFile$","environment","bootstrapModule","window"],"mappings":"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","file":"main-es5.js","sourcesContent":["function webpackEmptyAsyncContext(req) {\n\t// Here Promise.resolve().then() is used instead of new Promise() to prevent\n\t// uncaught exception popping up in devtools\n\treturn Promise.resolve().then(function() {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t});\n}\nwebpackEmptyAsyncContext.keys = function() { return []; };\nwebpackEmptyAsyncContext.resolve = webpackEmptyAsyncContext;\nmodule.exports = webpackEmptyAsyncContext;\nwebpackEmptyAsyncContext.id = \"./$$_lazy_route_resource lazy recursive\";","var map = {\n\t\"./ion-action-sheet.entry.js\": [\n\t\t\"./node_modules/@ionic/core/dist/esm/ion-action-sheet.entry.js\",\n\t\t\"common\",\n\t\t0\n\t],\n\t\"./ion-alert.entry.js\": [\n\t\t\"./node_modules/@ionic/core/dist/esm/ion-alert.entry.js\",\n\t\t\"common\",\n\t\t1\n\t],\n\t\"./ion-app_8.entry.js\": [\n\t\t\"./node_modules/@ionic/core/dist/esm/ion-app_8.entry.js\",\n\t\t\"common\",\n\t\t2\n\t],\n\t\"./ion-avatar_3.entry.js\": [\n\t\t\"./node_modules/@ionic/core/dist/esm/ion-avatar_3.entry.js\",\n\t\t\"common\",\n\t\t3\n\t],\n\t\"./ion-back-button.entry.js\": [\n\t\t\"./node_modules/@ionic/core/dist/esm/ion-back-button.entry.js\",\n\t\t\"common\",\n\t\t4\n\t],\n\t\"./ion-backdrop.entry.js\": [\n\t\t\"./node_modules/@ionic/core/dist/esm/ion-backdrop.entry.js\",\n\t\t5\n\t],\n\t\"./ion-button_2.entry.js\": [\n\t\t\"./node_modules/@ionic/core/dist/esm/ion-button_2.entry.js\",\n\t\t\"common\",\n\t\t6\n\t],\n\t\"./ion-card_5.entry.js\": [\n\t\t\"./node_modules/@ionic/core/dist/esm/ion-card_5.entry.js\",\n\t\t\"common\",\n\t\t7\n\t],\n\t\"./ion-checkbox.entry.js\": [\n\t\t\"./node_modules/@ionic/core/dist/esm/ion-checkbox.entry.js\",\n\t\t\"common\",\n\t\t8\n\t],\n\t\"./ion-chip.entry.js\": [\n\t\t\"./node_modules/@ionic/core/dist/esm/ion-chip.entry.js\",\n\t\t\"common\",\n\t\t9\n\t],\n\t\"./ion-col_3.entry.js\": [\n\t\t\"./node_modules/@ionic/core/dist/esm/ion-col_3.entry.js\",\n\t\t10\n\t],\n\t\"./ion-datetime_3.entry.js\": [\n\t\t\"./node_modules/@ionic/core/dist/esm/ion-datetime_3.entry.js\",\n\t\t\"common\",\n\t\t11\n\t],\n\t\"./ion-fab_3.entry.js\": [\n\t\t\"./node_modules/@ionic/core/dist/esm/ion-fab_3.entry.js\",\n\t\t\"common\",\n\t\t12\n\t],\n\t\"./ion-img.entry.js\": [\n\t\t\"./node_modules/@ionic/core/dist/esm/ion-img.entry.js\",\n\t\t13\n\t],\n\t\"./ion-infinite-scroll_2.entry.js\": [\n\t\t\"./node_modules/@ionic/core/dist/esm/ion-infinite-scroll_2.entry.js\",\n\t\t14\n\t],\n\t\"./ion-input.entry.js\": [\n\t\t\"./node_modules/@ionic/core/dist/esm/ion-input.entry.js\",\n\t\t\"common\",\n\t\t15\n\t],\n\t\"./ion-item-option_3.entry.js\": [\n\t\t\"./node_modules/@ionic/core/dist/esm/ion-item-option_3.entry.js\",\n\t\t\"common\",\n\t\t16\n\t],\n\t\"./ion-item_8.entry.js\": [\n\t\t\"./node_modules/@ionic/core/dist/esm/ion-item_8.entry.js\",\n\t\t\"common\",\n\t\t17\n\t],\n\t\"./ion-loading.entry.js\": [\n\t\t\"./node_modules/@ionic/core/dist/esm/ion-loading.entry.js\",\n\t\t\"common\",\n\t\t18\n\t],\n\t\"./ion-menu_3.entry.js\": [\n\t\t\"./node_modules/@ionic/core/dist/esm/ion-menu_3.entry.js\",\n\t\t\"common\",\n\t\t19\n\t],\n\t\"./ion-modal.entry.js\": [\n\t\t\"./node_modules/@ionic/core/dist/esm/ion-modal.entry.js\",\n\t\t\"common\",\n\t\t20\n\t],\n\t\"./ion-nav_2.entry.js\": [\n\t\t\"./node_modules/@ionic/core/dist/esm/ion-nav_2.entry.js\",\n\t\t\"common\",\n\t\t21\n\t],\n\t\"./ion-popover.entry.js\": [\n\t\t\"./node_modules/@ionic/core/dist/esm/ion-popover.entry.js\",\n\t\t\"common\",\n\t\t22\n\t],\n\t\"./ion-progress-bar.entry.js\": [\n\t\t\"./node_modules/@ionic/core/dist/esm/ion-progress-bar.entry.js\",\n\t\t\"common\",\n\t\t23\n\t],\n\t\"./ion-radio_2.entry.js\": [\n\t\t\"./node_modules/@ionic/core/dist/esm/ion-radio_2.entry.js\",\n\t\t\"common\",\n\t\t24\n\t],\n\t\"./ion-range.entry.js\": [\n\t\t\"./node_modules/@ionic/core/dist/esm/ion-range.entry.js\",\n\t\t\"common\",\n\t\t25\n\t],\n\t\"./ion-refresher_2.entry.js\": [\n\t\t\"./node_modules/@ionic/core/dist/esm/ion-refresher_2.entry.js\",\n\t\t\"common\",\n\t\t26\n\t],\n\t\"./ion-reorder_2.entry.js\": [\n\t\t\"./node_modules/@ionic/core/dist/esm/ion-reorder_2.entry.js\",\n\t\t\"common\",\n\t\t27\n\t],\n\t\"./ion-ripple-effect.entry.js\": [\n\t\t\"./node_modules/@ionic/core/dist/esm/ion-ripple-effect.entry.js\",\n\t\t28\n\t],\n\t\"./ion-route_4.entry.js\": [\n\t\t\"./node_modules/@ionic/core/dist/esm/ion-route_4.entry.js\",\n\t\t\"common\",\n\t\t29\n\t],\n\t\"./ion-searchbar.entry.js\": [\n\t\t\"./node_modules/@ionic/core/dist/esm/ion-searchbar.entry.js\",\n\t\t\"common\",\n\t\t30\n\t],\n\t\"./ion-segment_2.entry.js\": [\n\t\t\"./node_modules/@ionic/core/dist/esm/ion-segment_2.entry.js\",\n\t\t\"common\",\n\t\t31\n\t],\n\t\"./ion-select_3.entry.js\": [\n\t\t\"./node_modules/@ionic/core/dist/esm/ion-select_3.entry.js\",\n\t\t\"common\",\n\t\t32\n\t],\n\t\"./ion-slide_2.entry.js\": [\n\t\t\"./node_modules/@ionic/core/dist/esm/ion-slide_2.entry.js\",\n\t\t33\n\t],\n\t\"./ion-spinner.entry.js\": [\n\t\t\"./node_modules/@ionic/core/dist/esm/ion-spinner.entry.js\",\n\t\t\"common\",\n\t\t34\n\t],\n\t\"./ion-split-pane.entry.js\": [\n\t\t\"./node_modules/@ionic/core/dist/esm/ion-split-pane.entry.js\",\n\t\t35\n\t],\n\t\"./ion-tab-bar_2.entry.js\": [\n\t\t\"./node_modules/@ionic/core/dist/esm/ion-tab-bar_2.entry.js\",\n\t\t\"common\",\n\t\t36\n\t],\n\t\"./ion-tab_2.entry.js\": [\n\t\t\"./node_modules/@ionic/core/dist/esm/ion-tab_2.entry.js\",\n\t\t\"common\",\n\t\t37\n\t],\n\t\"./ion-text.entry.js\": [\n\t\t\"./node_modules/@ionic/core/dist/esm/ion-text.entry.js\",\n\t\t\"common\",\n\t\t38\n\t],\n\t\"./ion-textarea.entry.js\": [\n\t\t\"./node_modules/@ionic/core/dist/esm/ion-textarea.entry.js\",\n\t\t\"common\",\n\t\t39\n\t],\n\t\"./ion-toast.entry.js\": [\n\t\t\"./node_modules/@ionic/core/dist/esm/ion-toast.entry.js\",\n\t\t\"common\",\n\t\t40\n\t],\n\t\"./ion-toggle.entry.js\": [\n\t\t\"./node_modules/@ionic/core/dist/esm/ion-toggle.entry.js\",\n\t\t\"common\",\n\t\t41\n\t],\n\t\"./ion-virtual-scroll.entry.js\": [\n\t\t\"./node_modules/@ionic/core/dist/esm/ion-virtual-scroll.entry.js\",\n\t\t42\n\t]\n};\nfunction webpackAsyncContext(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\treturn Promise.resolve().then(function() {\n\t\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\t\te.code = 'MODULE_NOT_FOUND';\n\t\t\tthrow e;\n\t\t});\n\t}\n\n\tvar ids = map[req], id = ids[0];\n\treturn Promise.all(ids.slice(1).map(__webpack_require__.e)).then(function() {\n\t\treturn __webpack_require__(id);\n\t});\n}\nwebpackAsyncContext.keys = function webpackAsyncContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackAsyncContext.id = \"./node_modules/@ionic/core/dist/esm lazy recursive ^\\\\.\\\\/.*\\\\.entry\\\\.js$ include: \\\\.entry\\\\.js$ exclude: \\\\.system\\\\.entry\\\\.js$\";\nmodule.exports = webpackAsyncContext;","var map = {\n\t\"./pwa-action-sheet.entry.js\": [\n\t\t\"./node_modules/@ionic/pwa-elements/dist/esm/pwa-action-sheet.entry.js\",\n\t\t43\n\t],\n\t\"./pwa-camera-modal-instance.entry.js\": [\n\t\t\"./node_modules/@ionic/pwa-elements/dist/esm/pwa-camera-modal-instance.entry.js\",\n\t\t44\n\t],\n\t\"./pwa-camera-modal.entry.js\": [\n\t\t\"./node_modules/@ionic/pwa-elements/dist/esm/pwa-camera-modal.entry.js\",\n\t\t45\n\t],\n\t\"./pwa-camera.entry.js\": [\n\t\t\"./node_modules/@ionic/pwa-elements/dist/esm/pwa-camera.entry.js\",\n\t\t46\n\t],\n\t\"./pwa-toast.entry.js\": [\n\t\t\"./node_modules/@ionic/pwa-elements/dist/esm/pwa-toast.entry.js\",\n\t\t47\n\t]\n};\nfunction webpackAsyncContext(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\treturn Promise.resolve().then(function() {\n\t\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\t\te.code = 'MODULE_NOT_FOUND';\n\t\t\tthrow e;\n\t\t});\n\t}\n\n\tvar ids = map[req], id = ids[0];\n\treturn __webpack_require__.e(ids[1]).then(function() {\n\t\treturn __webpack_require__(id);\n\t});\n}\nwebpackAsyncContext.keys = function webpackAsyncContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackAsyncContext.id = \"./node_modules/@ionic/pwa-elements/dist/esm lazy recursive ^\\\\.\\\\/.*\\\\.entry\\\\.js$ include: \\\\.entry\\\\.js$ exclude: \\\\.system\\\\.entry\\\\.js$\";\nmodule.exports = webpackAsyncContext;","export default \"<ion-app>\\n  <ion-router-outlet></ion-router-outlet>\\n</ion-app>\\n\";","import { NgModule } from '@angular/core';\nimport { PreloadAllModules, RouterModule, Routes } from '@angular/router';\n\nconst routes: Routes = [{\n  path: '',\n  redirectTo: 'storage',\n  pathMatch: 'full'\n}, {\n  path: 'storage',\n  loadChildren: () => import('./pages/storage/storage.module').then(m => m.StoragePageModule)\n}, {\n  path: 'settings',\n  loadChildren: () => import('./pages/settings/settings.module').then(m => m.SettingsPageModule)\n}, {\n  path: 'proof',\n  loadChildren: () => import('./pages/proof/proof.module').then(m => m.ProofPageModule)\n}];\n\n@NgModule({\n  imports: [\n    RouterModule.forRoot(routes, { preloadingStrategy: PreloadAllModules })\n  ],\n  exports: [RouterModule]\n})\nexport class AppRoutingModule { }\n","export default \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL2FwcC5jb21wb25lbnQuc2NzcyJ9 */\";","import { Component } from '@angular/core';\nimport { Plugins } from '@capacitor/core';\nimport { Platform } from '@ionic/angular';\nimport { TranslocoService } from '@ngneat/transloco';\nimport { UntilDestroy, untilDestroyed } from '@ngneat/until-destroy';\nimport { CollectorService } from './services/collector/collector.service';\nimport { CapacitorProvider } from './services/collector/information/capacitor-provider/capacitor-provider';\nimport { DefaultSignatureProvider } from './services/collector/signature/default-provider/default-provider';\nimport { InformationRepository } from './services/data/information/information-repository.service';\nimport { SignatureRepository } from './services/data/signature/signature-repository.service';\nimport { LanguageService } from './services/language/language.service';\nimport { NotificationService } from './services/notification/notification.service';\nimport { PublishersAlert } from './services/publisher/publishers-alert/publishers-alert.service';\nimport { SamplePublisher } from './services/publisher/sample-publisher/sample-publisher';\nimport { SerializationService } from './services/serialization/serialization.service';\n\nconst { SplashScreen } = Plugins;\n\n@UntilDestroy({ checkProperties: true })\n@Component({\n  selector: 'app-root',\n  templateUrl: 'app.component.html',\n  styleUrls: ['app.component.scss']\n})\nexport class AppComponent {\n  constructor(\n    private readonly platform: Platform,\n    private readonly collectorService: CollectorService,\n    private readonly publishersAlert: PublishersAlert,\n    private readonly serializationService: SerializationService,\n    private readonly informationRepository: InformationRepository,\n    private readonly signatureRepository: SignatureRepository,\n    private readonly translocoService: TranslocoService,\n    private readonly notificationService: NotificationService,\n    langaugeService: LanguageService\n  ) {\n    this.initializeApp();\n    this.initializeCollector();\n    this.initializePublisher();\n    langaugeService.initialize$().pipe(untilDestroyed(this)).subscribe();\n  }\n\n  initializeApp() {\n    this.platform.ready().then(() => {\n      SplashScreen.hide();\n    });\n  }\n\n  initializeCollector() {\n    DefaultSignatureProvider.initialize$().pipe(untilDestroyed(this)).subscribe();\n    this.collectorService.addInformationProvider(\n      new CapacitorProvider(this.informationRepository, this.translocoService)\n    );\n    this.collectorService.addSignatureProvider(\n      new DefaultSignatureProvider(this.signatureRepository, this.serializationService)\n    );\n  }\n\n  initializePublisher() {\n    this.publishersAlert.addPublisher(\n      new SamplePublisher(this.translocoService, this.notificationService)\n    );\n  }\n}\n","import { HttpClientModule } from '@angular/common/http';\nimport { NgModule } from '@angular/core';\nimport { BrowserModule } from '@angular/platform-browser';\nimport { RouteReuseStrategy } from '@angular/router';\nimport { SplashScreen } from '@ionic-native/splash-screen/ngx';\nimport { StatusBar } from '@ionic-native/status-bar/ngx';\nimport { IonicModule, IonicRouteStrategy } from '@ionic/angular';\nimport { AppRoutingModule } from './app-routing.module';\nimport { AppComponent } from './app.component';\nimport { TranslocoRootModule } from './transloco-root.module';\n\n@NgModule({\n  declarations: [AppComponent],\n  entryComponents: [],\n  imports: [\n    BrowserModule,\n    IonicModule.forRoot(),\n    AppRoutingModule,\n    HttpClientModule,\n    TranslocoRootModule\n  ],\n  providers: [\n    StatusBar,\n    SplashScreen,\n    { provide: RouteReuseStrategy, useClass: IonicRouteStrategy }\n  ],\n  bootstrap: [AppComponent]\n})\nexport class AppModule { }\n","import { Injectable } from '@angular/core';\nimport { TranslocoService } from '@ngneat/transloco';\nimport { forkJoin } from 'rxjs';\nimport { defaultIfEmpty, map, switchMap, switchMapTo, tap } from 'rxjs/operators';\nimport { subscribeInBackground } from 'src/app/utils/background-task/background-task';\nimport { fileNameWithoutExtension } from 'src/app/utils/file/file';\nimport { MimeType } from 'src/app/utils/mime-type';\nimport { Information } from '../data/information/information';\nimport { Proof } from '../data/proof/proof';\nimport { ProofRepository } from '../data/proof/proof-repository.service';\nimport { NotificationService } from '../notification/notification.service';\nimport { InformationProvider } from './information/information-provider';\nimport { SignatureProvider } from './signature/signature-provider';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class CollectorService {\n\n  private readonly informationProviders = new Set<InformationProvider>();\n  private readonly signatureProviders = new Set<SignatureProvider>();\n\n  constructor(\n    private readonly proofRepository: ProofRepository,\n    private readonly notificationService: NotificationService,\n    private readonly translocoService: TranslocoService\n  ) { }\n\n  storeAndCollect(rawBase64: string, mimeType: MimeType) {\n    // Deliberately store proof and its media file in the foreground, so the app page can\n    // correctly and continuously subscribe the Storage.getAll$().\n    this.store$(rawBase64, mimeType).subscribe(proof => {\n      subscribeInBackground(this.collectAndSign$(proof));\n    });\n  }\n\n  private store$(rawBase64: string, mimeType: MimeType) {\n    return this.proofRepository.saveRawFile$(rawBase64, mimeType).pipe(\n      // Get the proof hash from the uri.\n      map(uri => fileNameWithoutExtension(uri)),\n      // Store the media file.\n      switchMap(hash => this.proofRepository.add$({ hash, mimeType, timestamp: Date.now() })),\n      map(proofs => proofs[0])\n    );\n  }\n\n  private collectAndSign$(proof: Proof) {\n    const notificationId = this.notificationService.createNotificationId();\n    this.notificationService.notify(\n      notificationId,\n      this.translocoService.translate('collectingProof'),\n      this.translocoService.translate('collectingInformation')\n    );\n    return forkJoin([...this.informationProviders].map(provider => provider.collectAndStore$(proof))).pipe(\n      defaultIfEmpty([] as Information[][]),\n      tap(_ => this.notificationService.notify(\n        notificationId,\n        this.translocoService.translate('collectingProof'),\n        this.translocoService.translate('signingProof')\n      )),\n      switchMapTo(forkJoin([...this.signatureProviders].map(provider => provider.collectAndStore$(proof)))),\n      tap(_ => this.notificationService.cancel(notificationId))\n    );\n  }\n\n  addInformationProvider(...providers: InformationProvider[]) {\n    providers.forEach(provider => this.informationProviders.add(provider));\n  }\n\n  removeInformationProvider(...providers: InformationProvider[]) {\n    providers.forEach(provider => this.informationProviders.delete(provider));\n  }\n\n  addSignatureProvider(...providers: SignatureProvider[]) {\n    providers.forEach(provider => this.signatureProviders.add(provider));\n  }\n\n  removeSignatureProvider(...providers: SignatureProvider[]) {\n    providers.forEach(provider => this.signatureProviders.delete(provider));\n  }\n}\n","import { Plugins } from '@capacitor/core';\nimport { TranslocoService } from '@ngneat/transloco';\nimport { defer, Observable, zip } from 'rxjs';\nimport { map } from 'rxjs/operators';\nimport { Information } from 'src/app/services/data/information/information';\nimport { InformationRepository } from 'src/app/services/data/information/information-repository.service';\nimport { Proof } from 'src/app/services/data/proof/proof';\nimport { InformationProvider } from '../information-provider';\n\nconst { Device, Geolocation } = Plugins;\n\nexport class CapacitorProvider extends InformationProvider {\n\n  readonly name = 'Capacitor';\n\n  constructor(\n    informationRepository: InformationRepository,\n    private readonly translocoService: TranslocoService\n  ) {\n    super(informationRepository);\n  }\n\n  protected provide$(proof: Proof): Observable<Information[]> {\n    return zip(\n      defer(() => Device.getInfo()),\n      defer(() => Device.getBatteryInfo()),\n      defer(() => Device.getLanguageCode()),\n      defer(() => Geolocation.getCurrentPosition({\n        enableHighAccuracy: true,\n        maximumAge: 10 * 60 * 1000,\n        timeout: 10 * 1000\n      }))\n    ).pipe(\n      map(([deviceInfo, batteryInfo, languageCode, geolocationPosition]) => {\n        return [{\n          proofHash: proof.hash,\n          provider: this.name,\n          name: this.translocoService.translate('deviceName'),\n          value: String(deviceInfo.name)\n        }, {\n          proofHash: proof.hash,\n          provider: this.name,\n          name: this.translocoService.translate('deviceModel'),\n          value: String(deviceInfo.model)\n        }, {\n          proofHash: proof.hash,\n          provider: this.name,\n          name: this.translocoService.translate('devicePlatform'),\n          value: String(deviceInfo.platform)\n        }, {\n          proofHash: proof.hash,\n          provider: this.name,\n          name: this.translocoService.translate('uuid'),\n          value: String(deviceInfo.uuid)\n        }, {\n          proofHash: proof.hash,\n          provider: this.name,\n          name: this.translocoService.translate('appVersion'),\n          value: String(deviceInfo.appVersion)\n        }, {\n          proofHash: proof.hash,\n          provider: this.name,\n          name: this.translocoService.translate('appVersionCode'),\n          value: String(deviceInfo.appBuild)\n        }, {\n          proofHash: proof.hash,\n          provider: this.name,\n          name: this.translocoService.translate('operatingSystem'),\n          value: String(deviceInfo.operatingSystem)\n        }, {\n          proofHash: proof.hash,\n          provider: this.name,\n          name: this.translocoService.translate('osVersion'),\n          value: String(deviceInfo.osVersion)\n        }, {\n          proofHash: proof.hash,\n          provider: this.name,\n          name: this.translocoService.translate('deviceManufacturer'),\n          value: String(deviceInfo.manufacturer)\n        }, {\n          proofHash: proof.hash,\n          provider: this.name,\n          name: this.translocoService.translate('runningOnVm'),\n          value: String(deviceInfo.isVirtual)\n        }, {\n          proofHash: proof.hash,\n          provider: this.name,\n          name: this.translocoService.translate('usedMemory'),\n          value: String(deviceInfo.memUsed)\n        }, {\n          proofHash: proof.hash,\n          provider: this.name,\n          name: this.translocoService.translate('freeDiskSpace'),\n          value: String(deviceInfo.diskFree)\n        }, {\n          proofHash: proof.hash,\n          provider: this.name,\n          name: this.translocoService.translate('totalDiskSpace'),\n          value: String(deviceInfo.diskTotal)\n        }, {\n          proofHash: proof.hash,\n          provider: this.name,\n          name: this.translocoService.translate('batteryLevel'),\n          value: String(batteryInfo.batteryLevel)\n        }, {\n          proofHash: proof.hash,\n          provider: this.name,\n          name: this.translocoService.translate('batteryCharging'),\n          value: String(batteryInfo.isCharging)\n        }, {\n          proofHash: proof.hash,\n          provider: this.name,\n          name: this.translocoService.translate('deviceLanguageCode'),\n          value: String(languageCode.value)\n        }, {\n          proofHash: proof.hash,\n          provider: this.name,\n          name: this.translocoService.translate('location'),\n          value: `(${geolocationPosition.coords.latitude}, ${geolocationPosition.coords.longitude})`\n        }];\n      })\n    );\n  }\n}\n","import { Observable } from 'rxjs';\nimport { switchMap } from 'rxjs/operators';\nimport { Information } from '../../data/information/information';\nimport { InformationRepository } from '../../data/information/information-repository.service';\nimport { Proof } from '../../data/proof/proof';\n\nexport abstract class InformationProvider {\n\n  abstract readonly name: string;\n\n  constructor(\n    private readonly informationRepository: InformationRepository\n  ) { }\n\n  collectAndStore$(proof: Proof) {\n    return this.provide$(proof).pipe(\n      switchMap(information => this.informationRepository.add$(...information))\n    );\n  }\n\n  protected abstract provide$(proof: Proof): Observable<Information[]>;\n}\n","import { Observable, of, zip } from 'rxjs';\nimport { filter, map, switchMap, switchMapTo } from 'rxjs/operators';\nimport { Proof } from 'src/app/services/data/proof/proof';\nimport { Signature } from 'src/app/services/data/signature/signature';\nimport { createEcKeyPair$, signWithSha256AndEcdsa$ } from 'src/app/utils/crypto/crypto';\nimport { PreferenceManager } from 'src/app/utils/preferences/preference-manager';\nimport { SignatureProvider } from '../signature-provider';\n\nconst preferences = PreferenceManager.DEFAULT_SIGNATURE_PROVIDER_PREF;\nconst enum PrefKeys {\n  PublicKey = 'publicKey',\n  PrivateKey = 'privateKey'\n}\n\nexport class DefaultSignatureProvider extends SignatureProvider {\n\n  readonly name = 'Web Crypto API';\n\n  static initialize$() {\n    return zip(\n      this.getPublicKey$(),\n      this.getPrivateKey$()\n    ).pipe(\n      filter(([publicKey, privateKey]) => publicKey.length === 0 || privateKey.length === 0),\n      switchMapTo(createEcKeyPair$()),\n      switchMap(({ publicKey, privateKey }) => zip(\n        preferences.setString$(PrefKeys.PublicKey, publicKey),\n        preferences.setString$(PrefKeys.PrivateKey, privateKey)\n      ))\n    );\n  }\n\n  static getPublicKey$() {\n    return preferences.getString$(PrefKeys.PublicKey);\n  }\n\n  static getPrivateKey$() {\n    return preferences.getString$(PrefKeys.PrivateKey);\n  }\n\n  provide$(proof: Proof, serialized: string): Observable<Signature> {\n    return preferences.getString$(PrefKeys.PrivateKey).pipe(\n      switchMap(privateKeyHex => signWithSha256AndEcdsa$(serialized, privateKeyHex)),\n      switchMap(signatureHex => zip(of(signatureHex), DefaultSignatureProvider.getPublicKey$())),\n      map(([signatureHex, publicKeyHex]) => ({\n        proofHash: proof.hash,\n        provider: this.name,\n        signature: signatureHex,\n        publicKey: publicKeyHex\n      }))\n    );\n  }\n}\n","import { Observable } from 'rxjs';\nimport { map, switchMap } from 'rxjs/operators';\nimport { Proof } from '../../data/proof/proof';\nimport { Signature } from '../../data/signature/signature';\nimport { SignatureRepository } from '../../data/signature/signature-repository.service';\nimport { SerializationService } from '../../serialization/serialization.service';\n\nexport abstract class SignatureProvider {\n\n  abstract readonly name: string;\n\n  constructor(\n    private readonly signatureRepository: SignatureRepository,\n    private readonly serializationService: SerializationService\n  ) { }\n\n  collectAndStore$(proof: Proof) {\n    return this.serializationService.stringify$(proof).pipe(\n      switchMap(serialized => this.provide$(proof, serialized)),\n      switchMap(signature => this.signatureRepository.add$(signature)),\n      map(signatures => signatures[0])\n    );\n  }\n\n  protected abstract provide$(proof: Proof, serialized: string): Observable<Signature>;\n}\n","import { Injectable } from '@angular/core';\nimport { of } from 'rxjs';\nimport { concatMap, concatMapTo, first, map, switchMap } from 'rxjs/operators';\nimport { Storage } from 'src/app/utils/storage/storage';\nimport { Proof } from '../proof/proof';\nimport { Caption } from './caption';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class CaptionRepository {\n\n  private readonly captionStorage = new Storage<Caption>('caption');\n\n  refresh$() { return this.captionStorage.refresh$(); }\n\n  getByProof$(proof: Proof) {\n    return this.captionStorage.getAll$().pipe(\n      map(captions => captions.filter(caption => caption.proofHash === proof.hash))\n    );\n  }\n\n  addOrEdit$(value: Caption) {\n    return this.captionStorage.getAll$().pipe(\n      first(),\n      map(captions => captions.find(caption => caption.proofHash === value.proofHash)),\n      concatMap(found => {\n        if (found) { return this.remove$(found); }\n        return of(found);\n      }),\n      concatMapTo(this.captionStorage.add$(value))\n    );\n  }\n\n  removeByProof$(proof: Proof) {\n    return this.getByProof$(proof).pipe(\n      switchMap(captions => this.remove$(...captions))\n    );\n  }\n\n  remove$(...captions: Caption[]) {\n    return this.captionStorage.remove$(...captions);\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { map, switchMap } from 'rxjs/operators';\nimport { Storage } from 'src/app/utils/storage/storage';\nimport { Proof } from '../proof/proof';\nimport { Information } from './information';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class InformationRepository {\n\n  private readonly informationStorage = new Storage<Information>('information');\n\n  refresh$() { return this.informationStorage.refresh$(); }\n\n  getByProof$(proof: Proof) {\n    return this.informationStorage.getAll$().pipe(\n      map(informationList => informationList.filter(info => info.proofHash === proof.hash))\n    );\n  }\n\n  add$(...information: Information[]) { return this.informationStorage.add$(...information); }\n\n  removeByProof$(proof: Proof) {\n    return this.getByProof$(proof).pipe(\n      switchMap(informationList => this.remove$(...informationList))\n    );\n  }\n\n  remove$(...information: Information[]) {\n    return this.informationStorage.remove$(...information);\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { FileDeleteResult, FilesystemDirectory, Plugins } from '@capacitor/core';\nimport { defer, forkJoin } from 'rxjs';\nimport { defaultIfEmpty, filter, map, switchMap, switchMapTo } from 'rxjs/operators';\nimport { sha256WithBase64$ } from 'src/app/utils/crypto/crypto';\nimport { MimeType } from 'src/app/utils/mime-type';\nimport { Storage } from 'src/app/utils/storage/storage';\nimport { Caption } from '../caption/caption';\nimport { CaptionRepository } from '../caption/caption-repository.service';\nimport { Information } from '../information/information';\nimport { InformationRepository } from '../information/information-repository.service';\nimport { Signature } from '../signature/signature';\nimport { SignatureRepository } from '../signature/signature-repository.service';\nimport { Proof } from './proof';\n\nconst { Filesystem } = Plugins;\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class ProofRepository {\n\n  private readonly proofStorage = new Storage<Proof>('proof');\n  private readonly rawFileDir = FilesystemDirectory.Data;\n  private readonly rawFileFolderName = 'raw';\n\n  constructor(\n    private readonly captionRepository: CaptionRepository,\n    private readonly informationRepository: InformationRepository,\n    private readonly signatureRepository: SignatureRepository\n  ) { }\n\n  refresh$() { return this.proofStorage.refresh$(); }\n\n  getAll$() { return this.proofStorage.getAll$(); }\n\n  getByHash$(hash: string) {\n    return this.getAll$().pipe(\n      map(proofList => proofList.find(proof => proof.hash === hash)),\n      filter(proof => !!proof)\n    );\n  }\n\n  add$(...proofs: Proof[]) { return this.proofStorage.add$(...proofs); }\n\n  remove$(...proofs: Proof[]) {\n    return this.proofStorage.remove$(...proofs).pipe(\n      switchMapTo(forkJoin(proofs.map(proof => this.deleteRawFile$(proof))).pipe(\n        defaultIfEmpty([] as FileDeleteResult[])\n      )),\n      switchMapTo(forkJoin(proofs.map(proof => this.captionRepository.removeByProof$(proof))).pipe(\n        defaultIfEmpty([] as Caption[][])\n      )),\n      switchMapTo(forkJoin(proofs.map(proof => this.informationRepository.removeByProof$(proof))).pipe(\n        defaultIfEmpty([] as Information[][])\n      )),\n      switchMapTo(forkJoin(proofs.map(proof => this.signatureRepository.removeByProof$(proof))).pipe(\n        defaultIfEmpty([] as Signature[][])\n      ))\n    );\n  }\n\n  getRawFile$(proof: Proof) {\n    return defer(() => Filesystem.readFile({\n      path: `${this.rawFileFolderName}/${proof.hash}.${proof.mimeType.extension}`,\n      directory: this.rawFileDir\n    })).pipe(map(result => result.data));\n  }\n\n  /**\n   * Copy [rawBase64] to add raw file to internal storage.\n   * @param rawBase64 The original source of raw file which will be copied.\n   * @param mimeType The file added in the internal storage. The name of the returned file will be its hash with original extension.\n   */\n  saveRawFile$(rawBase64: string, mimeType: MimeType) {\n    return sha256WithBase64$(rawBase64).pipe(\n      switchMap(hash => Filesystem.writeFile({\n        path: `${this.rawFileFolderName}/${hash}.${mimeType.extension}`,\n        data: rawBase64,\n        directory: this.rawFileDir,\n        recursive: true\n      })),\n      map(result => result.uri)\n    );\n  }\n\n  private deleteRawFile$(proof: Proof) {\n    return defer(() => Filesystem.deleteFile({\n      path: `${this.rawFileFolderName}/${proof.hash}.${proof.mimeType.extension}`,\n      directory: this.rawFileDir\n    }));\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { Observable } from 'rxjs';\nimport { map, switchMap } from 'rxjs/operators';\nimport { Storage } from 'src/app/utils/storage/storage';\nimport { Proof } from '../proof/proof';\nimport { Signature } from './signature';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class SignatureRepository {\n\n  private readonly signatureStorage = new Storage<Signature>('signature');\n\n  refresh$() { return this.signatureStorage.refresh$(); }\n\n  getByProof$(proof: Proof) {\n    return this.signatureStorage.getAll$().pipe(\n      map(signatures => signatures.filter(info => info.proofHash === proof.hash))\n    );\n  }\n\n  add$(...signatures: Signature[]): Observable<Signature[]> {\n    return this.signatureStorage.add$(...signatures);\n  }\n\n  removeByProof$(proof: Proof) {\n    return this.getByProof$(proof).pipe(\n      switchMap(signatures => this.remove$(...signatures))\n    );\n  }\n\n  remove$(...signatures: Signature[]) {\n    return this.signatureStorage.remove$(...signatures);\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { TranslocoService } from '@ngneat/transloco';\nimport { mapTo, switchMap } from 'rxjs/operators';\nimport { defaultLanguage, languages } from 'src/app/transloco-root.module';\nimport { PreferenceManager } from '../../utils/preferences/preference-manager';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class LanguageService {\n\n  private readonly preferences = PreferenceManager.LANGUAGE_PREF;\n  private readonly prefKeys = {\n    langauge: 'langauge'\n  };\n  readonly languages = languages;\n  readonly defaultLanguage = defaultLanguage;\n  readonly currentLanguageKey$ = this.preferences.get$(this.prefKeys.langauge, defaultLanguage[0]);\n\n  constructor(\n    private readonly translocoService: TranslocoService\n  ) { }\n\n  initialize$() {\n    this.translocoService.setDefaultLang(defaultLanguage[0]);\n    return this.currentLanguageKey$.pipe(switchMap(key => this.setCurrentLanguage$(key)));\n  }\n\n  setCurrentLanguage$(key: string) {\n    return this.preferences.set$(this.prefKeys.langauge, key).pipe(\n      mapTo(this.translocoService.setActiveLang(key)),\n      mapTo(key)\n    );\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { Plugins } from '@capacitor/core';\nimport { defer } from 'rxjs';\nimport { subscribeInBackground } from 'src/app/utils/background-task/background-task';\n\nconst { LocalNotifications } = Plugins;\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class NotificationService {\n\n  private currentId = 1;\n\n  constructor() {\n    LocalNotifications.requestPermission()\n      .then(result => console.log(`Notification permission request result: ${result.granted}`));\n  }\n\n  createNotificationId() {\n    this.currentId++;\n    return this.currentId;\n  }\n\n  // TODO: Add on-going configurations when this PR got merged and released:\n  //       https://github.com/ionic-team/capacitor/pull/3165\n  notify(id: number, title: string, body: string) {\n    subscribeInBackground(defer(() => LocalNotifications.schedule({\n      notifications: [{ title, body, id }]\n    })));\n  }\n\n  cancel(id: number) {\n    subscribeInBackground(defer(() => LocalNotifications.cancel({ notifications: [{ id: String(id) }] })));\n  }\n}\n","import { TranslocoService } from '@ngneat/transloco';\nimport { Observable } from 'rxjs';\nimport { tap } from 'rxjs/operators';\nimport { subscribeInBackground } from 'src/app/utils/background-task/background-task';\nimport { Proof } from '../data/proof/proof';\nimport { NotificationService } from '../notification/notification.service';\n\nexport abstract class Publisher {\n\n  abstract readonly name: string;\n\n  constructor(\n    private readonly translocoService: TranslocoService,\n    private readonly notificationService: NotificationService\n  ) { }\n\n  publish(proof: Proof) {\n    const notificationId = this.notificationService.createNotificationId();\n    this.notificationService.notify(\n      notificationId,\n      this.translocoService.translate('publishingProof'),\n      this.translocoService.translate('message.publishingProof', { hash: proof.hash, publisherName: this.name })\n    );\n    subscribeInBackground(\n      this.run$(proof).pipe(\n        tap(_ => this.notificationService.notify(\n          notificationId,\n          this.translocoService.translate('proofPublished'),\n          this.translocoService.translate('message.proofPublished', { hash: proof.hash, publisherName: this.name })\n        ))\n      )\n    );\n  }\n\n  protected abstract run$(proof: Proof): Observable<void>;\n}\n","import { Injectable } from '@angular/core';\nimport { AlertController } from '@ionic/angular';\nimport { TranslocoService } from '@ngneat/transloco';\nimport { defer } from 'rxjs';\nimport { switchMap } from 'rxjs/operators';\nimport { Proof } from '../../data/proof/proof';\nimport { Publisher } from '../publisher';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class PublishersAlert {\n\n  private readonly publishers: Publisher[] = [];\n\n  constructor(\n    private readonly alertController: AlertController,\n    private readonly translocoService: TranslocoService\n  ) { }\n\n  addPublisher(publisher: Publisher) {\n    this.publishers.push(publisher);\n  }\n\n  present$(proof: Proof) {\n    return defer(() => this.alertController.create({\n      header: this.translocoService.translate('selectAPublisher'),\n      inputs: this.publishers.map((publisher, index) => ({\n        name: publisher.name,\n        type: 'radio',\n        label: publisher.name,\n        value: publisher.name,\n        checked: index === 0\n      })),\n      buttons: [{\n        text: this.translocoService.translate('cancel'),\n        role: 'cancel'\n      }, {\n        text: this.translocoService.translate('ok'),\n        handler: (name) => this.getPublisherByName(name)?.publish(proof)\n      }]\n    })).pipe(\n      switchMap(alertElement => alertElement.present())\n    );\n  }\n\n  private getPublisherByName(name: string) {\n    return this.publishers.find(publisher => publisher.name === name);\n  }\n}\n","import { Observable, of } from 'rxjs';\nimport { delay, tap } from 'rxjs/operators';\nimport { Proof } from '../../data/proof/proof';\nimport { Publisher } from '../publisher';\n\nexport class SamplePublisher extends Publisher {\n\n  readonly name = 'Sample Publisher';\n\n  run$(proof: Proof): Observable<void> {\n    return of(void 0).pipe(\n      tap(_ => console.log(`Start publishing ${proof.hash} from ${this.name}.`)),\n      delay(3000),\n      tap(_ => console.log(`Finish publishing ${proof.hash} from ${this.name}.`))\n    );\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { first, map } from 'rxjs/operators';\nimport { Information } from '../data/information/information';\nimport { InformationRepository } from '../data/information/information-repository.service';\nimport { Proof } from '../data/proof/proof';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class SerializationService {\n\n  constructor(\n    private readonly informationRepository: InformationRepository\n  ) { }\n\n  stringify$(proof: Proof) {\n    return this.createSortedProofInformation$(proof).pipe(\n      map(sortedProofInformation => JSON.stringify(sortedProofInformation))\n    );\n  }\n\n  private createSortedProofInformation$(proof: Proof) {\n    return this.informationRepository.getByProof$(proof).pipe(\n      first(),\n      map(informationList => {\n        const sortedInformation = informationList.sort((a: Information, b: Information) => {\n          const proofHashCompared = a.proofHash.localeCompare(b.proofHash);\n          const providerCompared = a.provider.localeCompare(b.provider);\n          const nameCompared = a.name.localeCompare(b.name);\n          const valueCompared = a.value.localeCompare(b.value);\n          if (proofHashCompared !== 0) { return proofHashCompared; }\n          if (providerCompared !== 0) { return providerCompared; }\n          if (nameCompared !== 0) { return nameCompared; }\n          return valueCompared;\n        });\n        return ({ proof, sortedInformation } as SortedProofInformation);\n      })\n    );\n  }\n}\n\ninterface SortedProofInformation {\n  readonly proof: Proof;\n  readonly sortedInformation: Information[];\n}\n","import { HttpClient } from '@angular/common/http';\nimport { Injectable, NgModule } from '@angular/core';\nimport { Translation, translocoConfig, TranslocoLoader, TranslocoModule, TRANSLOCO_CONFIG, TRANSLOCO_LOADER } from '@ngneat/transloco';\nimport { environment } from '../environments/environment';\n\nexport const languages: { [key: string]: string; } = {\n  'en-us': 'English (United State)',\n  'zh-tw': ''\n};\n\nexport const defaultLanguage = Object.entries(languages)[0];\n\n@Injectable({ providedIn: 'root' })\nexport class TranslocoHttpLoader implements TranslocoLoader {\n  constructor(private readonly http: HttpClient) { }\n\n  getTranslation(lang: string) {\n    return this.http.get<Translation>(`./assets/i18n/${lang}.json`);\n  }\n}\n\n@NgModule({\n  exports: [TranslocoModule],\n  providers: [\n    {\n      provide: TRANSLOCO_CONFIG,\n      useValue: translocoConfig({\n        availableLangs: Object.keys(languages),\n        defaultLang: defaultLanguage[0],\n        fallbackLang: defaultLanguage[0],\n        missingHandler: { useFallbackTranslation: true },\n        // Remove this option if your application doesn't support changing language in runtime.\n        reRenderOnLangChange: true,\n        prodMode: environment.production,\n      })\n    },\n    { provide: TRANSLOCO_LOADER, useClass: TranslocoHttpLoader }\n  ]\n})\nexport class TranslocoRootModule { }\n","import { Capacitor, Plugins } from '@capacitor/core';\nimport { Observable } from 'rxjs';\n\nconst { BackgroundTask } = Plugins;\n\nexport function subscribeInBackground(work$: Observable<any>) {\n  if (Capacitor.isPluginAvailable('BackgroundTask')) {\n    const taskId = BackgroundTask.beforeExit(() => {\n      work$.subscribe(_ => BackgroundTask.finish({ taskId }));\n    });\n  } else {\n    work$.subscribe();\n  }\n}\n","import { defer, of, zip } from 'rxjs';\nimport { map, switchMap } from 'rxjs/operators';\nimport { arrayBufferToHex, base64ToArrayBuffer, hexToArrayBuffer, stringToArrayBuffer } from '../encoding/encoding';\n\nconst subtle = crypto.subtle;\nconst SHA_256 = 'SHA-256';\nconst ECDSA = 'ECDSA';\nconst SECP256R1 = 'P-256';\nconst enum Usage {\n  Sign = 'sign',\n  Verify = 'verify'\n}\nconst enum Format {\n  PKCS8 = 'pkcs8',\n  SubjectPublicKeyInfo = 'spki'\n}\n\ninterface KeyPair {\n  publicKey: string;\n  privateKey: string;\n}\n\nexport function sha256$<T extends object>(object: T) {\n  return of(JSON.stringify(object)).pipe(\n    switchMap(json => sha256WithString$(json))\n  );\n}\n\nexport function sha256WithString$(str: string) {\n  return of(new TextEncoder().encode(str).buffer).pipe(\n    switchMap(arrayBuffer => subtle.digest(SHA_256, arrayBuffer)),\n    map(digested => arrayBufferToHex(digested))\n  );\n}\n\nexport function sha256WithBase64$(base64: string) {\n  return of(base64ToArrayBuffer(base64)).pipe(\n    switchMap(arrayBuffer => subtle.digest(SHA_256, arrayBuffer)),\n    map(digested => arrayBufferToHex(digested))\n  );\n}\n\nexport function createEcKeyPair$() {\n  return defer(() => subtle.generateKey(\n    {\n      name: ECDSA,\n      namedCurve: SECP256R1\n    },\n    true,\n    [Usage.Sign, Usage.Verify]\n  )).pipe(\n    switchMap(({ publicKey, privateKey }) => zip(exportEcdsaPublicKey$(publicKey), exportEcdsaPrivateKey$(privateKey))),\n    map(([publicKey, privateKey]) => ({ publicKey, privateKey } as KeyPair))\n  );\n}\n\nexport function signWithSha256AndEcdsa$(message: string, privateKeyHex: string) {\n  return importEcdsaPrivateKey$(privateKeyHex).pipe(\n    switchMap(key => subtle.sign({ name: ECDSA, hash: SHA_256 }, key, stringToArrayBuffer(message))),\n    map(signature => arrayBufferToHex(signature))\n  );\n}\n\nexport function verifyWithSha256AndEcdsa$(message: string, signatureHex: string, publicKeyHex: string) {\n  return importEcdsaPublicKey$(publicKeyHex).pipe(\n    switchMap(key => subtle.verify(\n      { name: ECDSA, hash: SHA_256 },\n      key,\n      hexToArrayBuffer(signatureHex),\n      stringToArrayBuffer(message)\n    ))\n  );\n}\n\nfunction exportEcdsaPublicKey$(key: CryptoKey) {\n  return defer(() => subtle.exportKey(Format.SubjectPublicKeyInfo, key)).pipe(\n    map(arrayBuffer => arrayBufferToHex(arrayBuffer))\n  );\n}\n\nfunction exportEcdsaPrivateKey$(key: CryptoKey) {\n  return defer(() => subtle.exportKey(Format.PKCS8, key)).pipe(\n    map(arrayBuffer => arrayBufferToHex(arrayBuffer))\n  );\n}\n\nfunction importEcdsaPublicKey$(keyHex: string) {\n  return defer(() => subtle.importKey(\n    Format.SubjectPublicKeyInfo,\n    hexToArrayBuffer(keyHex),\n    {\n      name: ECDSA,\n      hash: SHA_256,\n      namedCurve: SECP256R1\n    },\n    true,\n    [Usage.Verify]\n  ));\n}\n\nfunction importEcdsaPrivateKey$(keyHex: string) {\n  return defer(() => subtle.importKey(\n    Format.PKCS8,\n    hexToArrayBuffer(keyHex),\n    {\n      name: ECDSA,\n      hash: SHA_256,\n      namedCurve: SECP256R1\n    },\n    true,\n    [Usage.Sign]\n  ));\n}\n","const textEncoder = new TextEncoder();\nconst textDecoder = new TextDecoder();\n\nexport function base64ToArrayBuffer(base64: string) {\n  const binaryString = atob(base64);\n  const bytes = new Uint8Array(binaryString.length);\n  for (let i = 0; i < binaryString.length; i++) {\n    bytes[i] = binaryString.charCodeAt(i);\n  }\n  return bytes.buffer;\n}\n\nexport function arrayBufferToBase64(arrayBuffer: ArrayBuffer) {\n  return btoa(String.fromCharCode(...new Uint8Array(arrayBuffer)));\n}\n\nexport function arrayBufferToHex(arrayBuffer: ArrayBuffer) {\n  return [...new Uint8Array(arrayBuffer)]\n    .map(b => b.toString(16).padStart(2, '0'))\n    .join('');\n}\n\nexport function hexToArrayBuffer(hex: string) {\n  // tslint:disable-next-line: no-non-null-assertion\n  return new Uint8Array(hex.match(/[\\da-f]{2}/gi)!.map(h => parseInt(h, 16))).buffer;\n}\n\nexport function stringToArrayBuffer(str: string) {\n  return textEncoder.encode(str).buffer;\n}\n\nexport function arrayBufferToString(arrayBuffer: ArrayBuffer) {\n  return textDecoder.decode(arrayBuffer);\n}\n","export function fileNameWithoutExtension(uri: string) {\n    // tslint:disable-next-line: no-non-null-assertion\n    return uri.match(/([^\\/]+)(?=\\.\\w+$)/)![0];\n}\n","import { Preferences } from './preferences';\n\nconst enum RepositoryName {\n  Language = 'language',\n  DefaultSignatureProvider = 'defaultSignatureProvider'\n}\n\nexport class PreferenceManager {\n\n  static readonly LANGUAGE_PREF = new Preferences(RepositoryName.Language);\n  static readonly DEFAULT_SIGNATURE_PROVIDER_PREF = new Preferences(RepositoryName.DefaultSignatureProvider);\n}\n","import { Plugins } from '@capacitor/core';\nimport { defer, Observable } from 'rxjs';\nimport { map, mapTo } from 'rxjs/operators';\n\nconst { Storage } = Plugins;\n\nexport class Preferences {\n\n  constructor(readonly name: string) { }\n\n  get$<T>(key: string, defaultValue: T, converter: (str: string) => T = JSON.parse): Observable<T> {\n    return defer(() => Storage.get({ key: `${name}_${key}` })).pipe(\n      map(ret => ret.value),\n      map(value => (value && value !== '[null]') ? converter(value) : defaultValue)\n    );\n  }\n\n  getNumber$(key: string, defaultValue: number = 0) {\n    return this.get$(key, defaultValue, Number);\n  }\n\n  getString$(key: string, defaultValue: string = '') {\n    return this.get$(key, defaultValue, (v) => v);\n  }\n\n  set$<T>(key: string, value: T, converter: (value: T) => string = JSON.stringify): Observable<T> {\n    return defer(() => Storage.set({ key: `${name}_${key}`, value: converter(value) })).pipe(\n      mapTo(value)\n    );\n  }\n\n  setNumber$(key: string, value: number) {\n    return this.set$(key, value, String);\n  }\n\n  setString$(key: string, value: string) {\n    return this.set$(key, value, (v) => v);\n  }\n}\n","import { FileReadResult, FilesystemDirectory, FilesystemEncoding, Plugins } from '@capacitor/core';\nimport { BehaviorSubject, defer, forkJoin, Observable, of } from 'rxjs';\nimport { catchError, defaultIfEmpty, map, mapTo, switchMap, switchMapTo, tap } from 'rxjs/operators';\nimport { sha256$ } from '../crypto/crypto';\n\nconst { Filesystem } = Plugins;\n\nexport class Storage<T extends object> {\n\n  constructor(\n    readonly name: string,\n    readonly directory: FilesystemDirectory = FilesystemDirectory.Data\n  ) { }\n\n  private readonly tuples$ = new BehaviorSubject<T[]>([]);\n\n  refresh$() {\n    console.log(`Storege refreshing: ${this.name}`);\n    return this.makeNameDir$().pipe(\n      switchMapTo(this.readNameDir$()),\n      map(result => result.files),\n      switchMap(fileNames => forkJoin(fileNames.map(fileName => this.readFile$(fileName))).pipe(defaultIfEmpty([] as FileReadResult[]))),\n      map(results => results.map(result => JSON.parse(result.data) as T)),\n      tap(tuples => this.tuples$.next(tuples))\n    );\n  }\n\n  private makeNameDir$(): Observable<void> {\n    return defer(() => Filesystem.mkdir({\n      path: this.name,\n      directory: this.directory,\n      recursive: true\n    })).pipe(\n      mapTo(void 0),\n      catchError((err: Error) => {\n        console.log(`${err.message} (${this.directory}/${this.name})`);\n        return of(void 0);\n      })\n    );\n  }\n\n  private readNameDir$() {\n    return defer(() => Filesystem.readdir({\n      path: this.name,\n      directory: this.directory\n    }));\n  }\n\n  private readFile$(fileName: string) {\n    return defer(() => Filesystem.readFile({\n      path: `${this.name}/${fileName}`,\n      directory: this.directory,\n      encoding: FilesystemEncoding.UTF8\n    }));\n  }\n\n  getAll$() { return this.tuples$.asObservable(); }\n\n  add$(...tuples: T[]) {\n    return forkJoin(tuples.map(tuple => this.saveFile$(tuple))).pipe(\n      switchMapTo(this.refresh$()),\n      mapTo(tuples)\n    );\n  }\n\n  private saveFile$(tuple: T) {\n    return sha256$(tuple).pipe(\n      switchMap(hash => Filesystem.writeFile({\n        path: `${this.name}/${hash}.json`,\n        data: JSON.stringify(tuple),\n        directory: this.directory,\n        encoding: FilesystemEncoding.UTF8,\n        recursive: true\n      })));\n  }\n\n  remove$(...tuples: T[]) {\n    return forkJoin(tuples.map(tuple => this.deleteFile$(tuple))).pipe(\n      switchMapTo(this.refresh$()),\n      mapTo(tuples)\n    );\n  }\n\n  private deleteFile$(tuple: T) {\n    return sha256$(tuple).pipe(\n      switchMap(hash => Filesystem.deleteFile({\n        path: `${this.name}/${hash}.json`,\n        directory: this.directory\n      })));\n  }\n}\n","// This file can be replaced during build by using the `fileReplacements` array.\n// `ng build --prod` replaces `environment.ts` with `environment.prod.ts`.\n// The list of file replacements can be found in `angular.json`.\n\nexport const environment = {\n  production: false\n};\n\n/*\n * For easier debugging in development mode, you can import the following file\n * to ignore zone related error stack frames such as `zone.run`, `zoneDelegate.invokeTask`.\n *\n * This import should be commented out in production mode because it will have a negative impact\n * on performance if an error is thrown.\n */\n// import 'zone.js/dist/zone-error';  // Included with Angular CLI.\n","import { enableProdMode } from '@angular/core';\nimport { platformBrowserDynamic } from '@angular/platform-browser-dynamic';\nimport { defineCustomElements } from '@ionic/pwa-elements/loader';\nimport { AppModule } from './app/app.module';\nimport { environment } from './environments/environment';\n\nif (environment.production) {\n  enableProdMode();\n}\n\nplatformBrowserDynamic().bootstrapModule(AppModule)\n  .catch(err => console.log(err));\n\ndefineCustomElements(window);\n"]}