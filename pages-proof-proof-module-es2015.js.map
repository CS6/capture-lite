{"version":3,"sources":["./src/app/pages/proof/proof.page.html","./src/app/pages/proof/proof-routing.module.ts","./src/app/pages/proof/proof.module.ts","./src/app/pages/proof/proof.page.scss","./src/app/pages/proof/proof.page.ts","./src/app/services/blocking-action/blocking-action.service.ts","./src/app/services/confirm-alert/confirm-alert.service.ts"],"names":[],"mappings":"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","file":"pages-proof-proof-module-es2015.js","sourcesContent":["export default \"<ion-header *transloco=\\\"let t\\\">\\n  <ion-toolbar>\\n    <ion-buttons slot=\\\"start\\\">\\n      <ion-button [routerLink]=\\\"['/storage']\\\" routerDirection=\\\"back\\\">\\n        <ion-icon slot=\\\"icon-only\\\" name=\\\"arrow-back\\\"></ion-icon>\\n      </ion-button>\\n    </ion-buttons>\\n    <ion-title>{{ t('proofDetails') }}</ion-title>\\n    <ion-buttons slot=\\\"end\\\">\\n      <ion-button (click)=\\\"publish()\\\">\\n        <ion-icon slot=\\\"icon-only\\\" name=\\\"cloud-upload\\\"></ion-icon>\\n      </ion-button>\\n      <ion-button (click)=\\\"remove()\\\">\\n        <ion-icon slot=\\\"icon-only\\\" name=\\\"trash\\\"></ion-icon>\\n      </ion-button>\\n    </ion-buttons>\\n  </ion-toolbar>\\n</ion-header>\\n\\n<ion-content *transloco=\\\"let t\\\">\\n  <ion-img [src]=\\\"'data:image/*;base64,' + (rawBase64$ | async)\\\"></ion-img>\\n  <ion-list lines=\\\"none\\\">\\n    <ion-item>\\n      <ion-icon slot=\\\"start\\\" name=\\\"reader\\\"></ion-icon>\\n      <ion-label class=\\\"ion-text-wrap\\\">\\n        <h2>{{ t('caption') }}</h2>\\n        <p>{{ (caption$ | async) === '' ? '(' + ( t('nothingHere') ) + ')' : (caption$ | async) }}</p>\\n      </ion-label>\\n      <ion-button (click)=\\\"editCaption()\\\" slot=\\\"end\\\" fill=\\\"clear\\\" shape=\\\"round\\\">\\n        <ion-icon slot=\\\"icon-only\\\" name=\\\"create\\\"></ion-icon>\\n      </ion-button>\\n    </ion-item>\\n    <ion-item>\\n      <ion-icon slot=\\\"start\\\" name=\\\"information\\\"></ion-icon>\\n      <ion-label class=\\\"ion-text-wrap\\\">\\n        <h2>{{ t('hash') }}</h2>\\n        <p>{{ hash$ | async }}</p>\\n      </ion-label>\\n    </ion-item>\\n    <ion-item>\\n      <ion-icon slot=\\\"start\\\" name=\\\"image\\\"></ion-icon>\\n      <ion-label class=\\\"ion-text-wrap\\\">\\n        <h2>{{ t('mimeType') }}</h2>\\n        <p>{{ mimeType$ | async }}</p>\\n      </ion-label>\\n    </ion-item>\\n    <ion-item>\\n      <ion-icon slot=\\\"start\\\" name=\\\"time\\\"></ion-icon>\\n      <ion-label class=\\\"ion-text-wrap\\\">\\n        <h2>{{ t('timestamp') }}</h2>\\n        <p>{{ timestamp$ | async }}</p>\\n      </ion-label>\\n    </ion-item>\\n    <ion-list-header>\\n      <ion-label>\\n        <h2>{{ t('information') }}</h2>\\n      </ion-label>\\n    </ion-list-header>\\n    <ion-item>\\n      <ion-slides pager>\\n        <ion-slide>\\n          <ion-card class=\\\"slide-card\\\"\\n            *ngFor=\\\"let providerWithInformationList of (providersWithImportantInformation$ | async)\\\">\\n            <ion-card-header>\\n              <ion-card-title>{{ providerWithInformationList.provider }}</ion-card-title>\\n            </ion-card-header>\\n            <ion-card-content>\\n              <ion-list *ngFor=\\\"let information of providerWithInformationList.informationList\\\">\\n                <ion-item>\\n                  <ion-label class=\\\"ion-text-wrap\\\">\\n                    <h3>{{ information.name }}</h3>\\n                    <p>{{ information.value }}</p>\\n                  </ion-label>\\n                </ion-item>\\n              </ion-list>\\n              <section>\\n                <ion-button expand=\\\"block\\\" [routerLink]=\\\"['/information', {hash: (hash$ | async)}]\\\">View All\\n                </ion-button>\\n              </section>\\n            </ion-card-content>\\n          </ion-card>\\n        </ion-slide>\\n      </ion-slides>\\n    </ion-item>\\n    <ion-list-header>\\n      <ion-label>\\n        <h2>{{ t('signatures') }}</h2>\\n      </ion-label>\\n    </ion-list-header>\\n    <ion-item>\\n      <ion-slides pager>\\n        <ion-slide *ngFor=\\\"let signature of (signatures$ | async)\\\">\\n          <ion-card class=\\\"slide-card\\\">\\n            <ion-card-header>\\n              <ion-card-title>{{ signature.provider }}</ion-card-title>\\n            </ion-card-header>\\n            <ion-card-content>\\n              <ion-list>\\n                <ion-item>\\n                  <ion-label class=\\\"ion-text-wrap\\\">\\n                    <h3>{{ t('signature') }}</h3>\\n                    <p>{{ signature.signature }}</p>\\n                  </ion-label>\\n                </ion-item>\\n                <ion-item>\\n                  <ion-label class=\\\"ion-text-wrap\\\">\\n                    <h3>{{ t('publicKey') }}</h3>\\n                    <p class=\\\"multiline\\\">{{ signature.publicKey }}</p>\\n                  </ion-label>\\n                </ion-item>\\n              </ion-list>\\n            </ion-card-content>\\n          </ion-card>\\n        </ion-slide>\\n      </ion-slides>\\n    </ion-item>\\n  </ion-list>\\n</ion-content>\";","import { NgModule } from '@angular/core';\nimport { RouterModule, Routes } from '@angular/router';\nimport { ProofPage } from './proof.page';\n\nconst routes: Routes = [{\n  path: '',\n  component: ProofPage\n}];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class ProofPageRoutingModule { }\n","import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport { FormsModule } from '@angular/forms';\nimport { IonicModule } from '@ionic/angular';\nimport { TranslocoModule } from '@ngneat/transloco';\nimport { ProofPageRoutingModule } from './proof-routing.module';\nimport { ProofPage } from './proof.page';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    ProofPageRoutingModule,\n    TranslocoModule\n  ],\n  declarations: [ProofPage]\n})\nexport class ProofPageModule { }\n","export default \"ion-slides {\\n  width: 100%;\\n}\\n\\n.slide-card {\\n  width: 100%;\\n  margin-bottom: 35px;\\n}\\n\\n.multiline {\\n  white-space: pre-wrap;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvcGFnZXMvcHJvb2YvcHJvb2YucGFnZS5zY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0VBQ0UsV0FBQTtBQUNGOztBQUVBO0VBQ0UsV0FBQTtFQUNBLG1CQUFBO0FBQ0Y7O0FBRUE7RUFDRSxxQkFBQTtBQUNGIiwiZmlsZSI6InNyYy9hcHAvcGFnZXMvcHJvb2YvcHJvb2YucGFnZS5zY3NzIiwic291cmNlc0NvbnRlbnQiOlsiaW9uLXNsaWRlcyB7XG4gIHdpZHRoOiAxMDAlO1xufVxuXG4uc2xpZGUtY2FyZCB7XG4gIHdpZHRoOiAxMDAlO1xuICBtYXJnaW4tYm90dG9tOiAzNXB4O1xufVxuXG4ubXVsdGlsaW5lIHtcbiAgd2hpdGUtc3BhY2U6IHByZS13cmFwO1xufVxuIl19 */\";","import { Component } from '@angular/core';\nimport { ActivatedRoute, Router } from '@angular/router';\nimport { AlertController } from '@ionic/angular';\nimport { TranslocoService } from '@ngneat/transloco';\nimport { UntilDestroy, untilDestroyed } from '@ngneat/until-destroy';\nimport { defer } from 'rxjs';\nimport { first, map, pluck, switchMap, switchMapTo } from 'rxjs/operators';\nimport { BlockingActionService } from 'src/app/services/blocking-action/blocking-action.service';\nimport { ConfirmAlert } from 'src/app/services/confirm-alert/confirm-alert.service';\nimport { CaptionRepository } from 'src/app/services/data/caption/caption-repository.service';\nimport { Importance } from 'src/app/services/data/information/information';\nimport { InformationRepository } from 'src/app/services/data/information/information-repository.service';\nimport { ProofRepository } from 'src/app/services/data/proof/proof-repository.service';\nimport { SignatureRepository } from 'src/app/services/data/signature/signature-repository.service';\nimport { PublishersAlert } from 'src/app/services/publisher/publishers-alert/publishers-alert.service';\nimport { isNonNullable } from 'src/app/utils/rx-operators';\n\n@UntilDestroy({ checkProperties: true })\n@Component({\n  selector: 'app-proof',\n  templateUrl: './proof.page.html',\n  styleUrls: ['./proof.page.scss'],\n})\nexport class ProofPage {\n\n  readonly proof$ = this.route.paramMap.pipe(\n    map(params => params.get('hash')),\n    isNonNullable(),\n    switchMap(hash => this.proofRepository.getByHash$(hash)),\n    isNonNullable()\n  );\n\n  readonly rawBase64$ = this.proof$.pipe(switchMap(proof => this.proofRepository.getRawFile$(proof)));\n  readonly hash$ = this.proof$.pipe(pluck('hash'));\n  readonly mimeType$ = this.proof$.pipe(pluck('mimeType'));\n  readonly timestamp$ = this.proof$.pipe(map(proof => new Date(proof.timestamp)));\n  readonly caption$ = this.proof$.pipe(\n    switchMap(proof => this.captionRepository.getByProof$(proof)),\n    map(caption => {\n      if (caption && caption.text.length > 0) { return caption.text; }\n      return '';\n    })\n  );\n\n  readonly providersWithImportantInformation$ = this.proof$.pipe(\n    switchMap(proof => this.informationRepository.getByProof$(proof)),\n    map(informationList => {\n      const providers = new Set(informationList.map(information => information.provider));\n      return [...providers].map(provider => ({\n        provider,\n        informationList: informationList.filter(\n          information => information.provider === provider && information.importance === Importance.High\n        )\n      }));\n    })\n  );\n\n  readonly signatures$ = this.proof$.pipe(\n    switchMap(proof => this.signatureRepository.getByProof$(proof))\n  );\n\n  constructor(\n    private readonly router: Router,\n    private readonly route: ActivatedRoute,\n    private readonly translocoService: TranslocoService,\n    private readonly alertController: AlertController,\n    private readonly confirmAlert: ConfirmAlert,\n    private readonly publishersAlert: PublishersAlert,\n    private readonly proofRepository: ProofRepository,\n    private readonly captionRepository: CaptionRepository,\n    private readonly informationRepository: InformationRepository,\n    private readonly signatureRepository: SignatureRepository,\n    private readonly blockingActionService: BlockingActionService\n  ) { }\n\n  ionViewWillEnter() {\n    this.proofRepository.refresh$().pipe(\n      switchMapTo(this.captionRepository.refresh$()),\n      switchMapTo(this.informationRepository.refresh$()),\n      switchMapTo(this.signatureRepository.refresh$()),\n      untilDestroyed(this)\n    ).subscribe();\n  }\n\n  publish() {\n    this.proof$.pipe(\n      first(),\n      switchMap(proof => this.publishersAlert.present$(proof)),\n      untilDestroyed(this)\n    ).subscribe();\n  }\n\n  remove() {\n    const onConfirm = () => this.blockingActionService.run$(\n      this.proof$.pipe(\n        switchMap(proof => this.proofRepository.remove$(proof)),\n        switchMapTo(defer(() => this.router.navigate(['..'])))\n      ),\n      { message: this.translocoService.translate('processing') }\n    ).pipe(untilDestroyed(this)).subscribe();\n\n    return this.confirmAlert.present$(onConfirm).pipe(untilDestroyed(this)).subscribe();\n  }\n\n  editCaption() {\n    const captionInputName = 'captionInputName';\n    this.caption$.pipe(\n      first(),\n      switchMap(caption => this.alertController.create({\n        header: this.translocoService.translate('editCaption'),\n        inputs: [{\n          name: captionInputName,\n          type: 'text',\n          value: caption,\n          placeholder: this.translocoService.translate('nothingHere')\n        }],\n        buttons: [{\n          text: this.translocoService.translate('cancel'),\n          role: 'cancel'\n        }, {\n          text: this.translocoService.translate('ok'),\n          handler: (inputs) => this.saveCaption(inputs[captionInputName])\n        }]\n      })),\n      switchMap(alertElement => alertElement.present()),\n      untilDestroyed(this)\n    ).subscribe();\n  }\n\n  private saveCaption(text: string) {\n    this.proof$.pipe(\n      switchMap(proof => this.captionRepository.addOrEdit$({\n        proofHash: proof.hash,\n        text\n      })),\n      untilDestroyed(this)\n    ).subscribe();\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { LoadingController } from '@ionic/angular';\nimport { LoadingOptions } from '@ionic/core';\nimport { defer, Observable, of, zip } from 'rxjs';\nimport { catchError, map, switchMap, switchMapTo } from 'rxjs/operators';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class BlockingActionService {\n\n  constructor(\n    private readonly loadingController: LoadingController\n  ) { }\n\n  run$<T>(action$: Observable<T>, opts: LoadingOptions) {\n    return defer(() => this.loadingController.create(opts)).pipe(\n      switchMap(loading => this._run$(action$, loading))\n    );\n  }\n\n  private _run$<T>(action$: Observable<T>, loading: HTMLIonLoadingElement) {\n    return defer(() => loading.present()).pipe(\n      switchMapTo(action$),\n      catchError(err => {\n        loading.dismiss();\n        throw err;\n      }),\n      switchMap(result => zip(defer(() => loading.dismiss()), of(result))),\n      map(([_, result]) => result)\n    );\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { AlertController } from '@ionic/angular';\nimport { TranslocoService } from '@ngneat/transloco';\nimport { defer } from 'rxjs';\nimport { switchMap } from 'rxjs/operators';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class ConfirmAlert {\n\n  constructor(\n    private readonly alertController: AlertController,\n    private readonly translocoService: TranslocoService\n  ) { }\n\n  present$(onConfirm: () => void) {\n    return defer(() => this.alertController.create({\n      header: this.translocoService.translate('areYouSure'),\n      message: this.translocoService.translate('message.areYouSure'),\n      buttons: [{\n        text: this.translocoService.translate('cancel'),\n        role: 'cancel'\n      }, {\n        text: this.translocoService.translate('ok'),\n        handler: onConfirm\n      }]\n    })).pipe(\n      switchMap(alertElement => alertElement.present())\n    );\n  }\n}\n"],"sourceRoot":"webpack:///"}